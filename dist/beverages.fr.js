!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=21)}([function(t,e){t.exports=jQuery},function(t,e,n){var i,r;(function(){function n(t){function e(e,n,i,r,s,o){for(;s>=0&&s<o;s+=t){var a=r?r[s]:s;i=n(i,e[a],a,e)}return i}return function(n,i,r,s){i=k(i,s,4);var o=!j(n)&&w.keys(n),a=(o||n).length,u=t>0?0:a-1;return arguments.length<3&&(r=n[o?o[u]:u],u+=t),e(n,i,r,o,u,a)}}function s(t){return function(e,n,i){n=E(n,i);for(var r=S(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(n(e[s],s,e))return s;return-1}}function o(t,e,n){return function(i,r,s){var o=0,a=S(i);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(i,r),i[s]===r?s:-1;if(r!==r)return s=e(p.call(i,o,a),w.isNaN),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(i[s]===r)return s;return-1}}function a(t,e){var n=B.length,i=t.constructor,r=w.isFunction(i)&&i.prototype||h,s="constructor";for(w.has(t,s)&&!w.contains(e,s)&&e.push(s);n--;)s=B[n],s in t&&t[s]!==r[s]&&!w.contains(e,s)&&e.push(s)}var u=this,l=u._,c=Array.prototype,h=Object.prototype,d=Function.prototype,f=c.push,p=c.slice,v=h.toString,g=h.hasOwnProperty,m=Array.isArray,b=Object.keys,y=d.bind,_=Object.create,x=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=w),e._=w,w.VERSION="1.8.3";var k=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}},E=function(t,e,n){return null==t?w.identity:w.isFunction(t)?k(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return E(t,e,1/0)};var A=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],o=t(s),a=o.length,u=0;u<a;u++){var l=o[u];e&&void 0!==n[l]||(n[l]=s[l])}return n}},O=function(t){if(!w.isObject(t))return{};if(_)return _(t);x.prototype=t;var e=new x;return x.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},I=Math.pow(2,53)-1,S=T("length"),j=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=I};w.each=w.forEach=function(t,e,n){e=k(e,n);var i,r;if(j(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var s=w.keys(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t},w.map=w.collect=function(t,e,n){e=E(e,n);for(var i=!j(t)&&w.keys(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s},w.reduce=w.foldl=w.inject=n(1),w.reduceRight=w.foldr=n(-1),w.find=w.detect=function(t,e,n){var i;if(i=j(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==i&&i!==-1)return t[i]},w.filter=w.select=function(t,e,n){var i=[];return e=E(e,n),w.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},w.reject=function(t,e,n){return w.filter(t,w.negate(E(e)),n)},w.every=w.all=function(t,e,n){e=E(e,n);for(var i=!j(t)&&w.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0},w.some=w.any=function(t,e,n){e=E(e,n);for(var i=!j(t)&&w.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,i){return j(t)||(t=w.values(t)),("number"!=typeof n||i)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=p.call(arguments,2),i=w.isFunction(e);return w.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var i,r,s=-(1/0),o=-(1/0);if(null==e&&null!=t){t=j(t)?t:w.values(t);for(var a=0,u=t.length;a<u;a++)i=t[a],i>s&&(s=i)}else e=E(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(r>o||r===-(1/0)&&s===-(1/0))&&(s=t,o=r)});return s},w.min=function(t,e,n){var i,r,s=1/0,o=1/0;if(null==e&&null!=t){t=j(t)?t:w.values(t);for(var a=0,u=t.length;a<u;a++)i=t[a],i<s&&(s=i)}else e=E(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(r<o||r===1/0&&s===1/0)&&(s=t,o=r)});return s},w.shuffle=function(t){for(var e,n=j(t)?t:w.values(t),i=n.length,r=Array(i),s=0;s<i;s++)e=w.random(0,s),e!==s&&(r[s]=r[e]),r[e]=n[s];return r},w.sample=function(t,e,n){return null==e||n?(j(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=E(e,n),w.pluck(w.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t){return function(e,n,i){var r={};return n=E(n,i),w.each(e,function(i,s){var o=n(i,s,e);t(r,i,o)}),r}};w.groupBy=M(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=M(function(t,e,n){t[n]=e}),w.countBy=M(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?p.call(t):j(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:j(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=E(e,n);var i=[],r=[];return w.each(t,function(t,n,s){(e(t,n,s)?i:r).push(t)}),[i,r]},w.first=w.head=w.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var N=function(t,e,n,i){for(var r=[],s=0,o=i||0,a=S(t);o<a;o++){var u=t[o];if(j(u)&&(w.isArray(u)||w.isArguments(u))){e||(u=N(u,e,n));var l=0,c=u.length;for(r.length+=c;l<c;)r[s++]=u[l++]}else n||(r[s++]=u)}return r};w.flatten=function(t,e){return N(t,e,!1)},w.without=function(t){return w.difference(t,p.call(arguments,1))},w.uniq=w.unique=function(t,e,n,i){w.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=E(n,i));for(var r=[],s=[],o=0,a=S(t);o<a;o++){var u=t[o],l=n?n(u,o,t):u;e?(o&&s===l||r.push(u),s=l):n?w.contains(s,l)||(s.push(l),r.push(u)):w.contains(r,u)||r.push(u)}return r},w.union=function(){return w.uniq(N(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=S(t);i<r;i++){var s=t[i];if(!w.contains(e,s)){for(var o=1;o<n&&w.contains(arguments[o],s);o++);o===n&&e.push(s)}}return e},w.difference=function(t){var e=N(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,S).length||0,n=Array(e),i=0;i<e;i++)n[i]=w.pluck(t,i);return n},w.object=function(t,e){for(var n={},i=0,r=S(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},w.findIndex=s(1),w.findLastIndex=s(-1),w.sortedIndex=function(t,e,n,i){n=E(n,i,1);for(var r=n(e),s=0,o=S(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s},w.indexOf=o(1,w.findIndex,w.sortedIndex),w.lastIndexOf=o(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r};var P=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=O(t.prototype),o=t.apply(s,r);return w.isObject(o)?o:s};w.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,p.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),i=function(){return P(t,i,e,this,n.concat(p.call(arguments)))};return i},w.partial=function(t){var e=p.call(arguments,1),n=function(){for(var i=0,r=e.length,s=Array(r),o=0;o<r;o++)s[o]=e[o]===w?arguments[i++]:e[o];for(;i<arguments.length;)s.push(arguments[i++]);return P(t,n,this,this,s)};return n},w.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return w.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n},w.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var i,r,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:w.now(),o=null,s=t.apply(i,r),o||(i=r=null)};return function(){var l=w.now();a||n.leading!==!1||(a=l);var c=e-(l-a);return i=this,r=arguments,c<=0||c>e?(o&&(clearTimeout(o),o=null),a=l,s=t.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(u,c)),s}},w.debounce=function(t,e,n){var i,r,s,o,a,u=function(){var l=w.now()-o;l<e&&l>=0?i=setTimeout(u,e-l):(i=null,n||(a=t.apply(s,r),i||(s=r=null)))};return function(){s=this,r=arguments,o=w.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(a=t.apply(s,r),s=r=null),a}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},w.once=w.partial(w.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return C&&a(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return C&&a(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},w.mapObject=function(t,e,n){e=E(e,n);for(var i,r=w.keys(t),s=r.length,o={},a=0;a<s;a++)i=r[a],o[i]=e(t[i],i,t);return o},w.pairs=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},w.invert=function(t){for(var e={},n=w.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=A(w.allKeys),w.extendOwn=w.assign=A(w.keys),w.findKey=function(t,e,n){e=E(e,n);for(var i,r=w.keys(t),s=0,o=r.length;s<o;s++)if(i=r[s],e(t[i],i,t))return i},w.pick=function(t,e,n){var i,r,s={},o=t;if(null==o)return s;w.isFunction(e)?(r=w.allKeys(o),i=k(e,n)):(r=N(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var a=0,u=r.length;a<u;a++){var l=r[a],c=o[l];i(c,l,o)&&(s[l]=c)}return s},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var i=w.map(N(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(i,e)}}return w.pick(t,e,n)},w.defaults=A(w.allKeys,!0),w.create=function(t,e){var n=O(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0};var R=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var r=v.call(t);if(r!==v.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var u=n.length;u--;)if(n[u]===t)return i[u]===e;if(n.push(t),i.push(e),s){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!R(t[u],e[u],n,i))return!1}else{var l,c=w.keys(t);if(u=c.length,w.keys(e).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(e,l)||!R(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0};w.isEqual=function(t,e){return R(t,e)},w.isEmpty=function(t){return null==t||(j(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=m||function(t){return"[object Array]"===v.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return v.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===v.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&g.call(t,e)},w.noConflict=function(){return u._=l,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=T,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var i=Array(Math.max(0,t));e=k(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=w.invert(D),H=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};w.escape=H(D),w.unescape=H(F),w.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),w.isFunction(i)?i.call(t):i};var L=0;w.uniqueId=function(t){var e=++L+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+V[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var i=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,function(e,n,i,o,a){return s+=t.slice(r,a).replace($,z),r=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return o.call(this,t,w)},u=e.variable||"obj";return a.source="function("+u+"){\n"+s+"}",a},w.chain=function(t){var e=w(t);return e._chain=!0,e};var q=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),q(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],q(this,n)}}),w.each(["concat","join","slice"],function(t){var e=c[t];w.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},i=[],r=function(){return w}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,n){(function(i){var r,s;n(1),n(0);!function(o){var a="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i;r=[n(1),n(0),e],s=function(t,e,n){a.Backbone=o(a,n,t,e)}.apply(e,r),!(void 0!==s&&(t.exports=s))}(function(t,e,n,i){var r=t.Backbone,s=Array.prototype.slice;e.VERSION="1.3.3",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],u(t,this),r)};case 4:return function(t,r,s){return n[e](this[i],u(t,this),r,s)};default:return function(){var t=s.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},a=function(t,e,i){n.each(e,function(e,r){n[r]&&(t.prototype[r]=o(e,r,i))})},u=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},h=/\s+/,d=function(t,e,i,r,s){var o,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in s&&void 0===s.context&&(s.context=r);for(o=n.keys(i);a<o.length;a++)e=d(t,e,o[a],i[o[a]],s)}else if(i&&h.test(i))for(o=i.split(h);a<o.length;a++)e=t(e,o[a],r,s);else e=t(e,i,r,s);return e};c.on=function(t,e,n){return f(this,t,e,n)};var f=function(t,e,n,i,r){if(t._events=d(p,t._events||{},e,n,{context:i,ctx:t,listening:r}),r){var s=t._listeners||(t._listeners={});s[r.id]=r}return t};c.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[r];if(!o){var a=this._listenId||(this._listenId=n.uniqueId("l"));o=s[r]={obj:t,objId:r,id:a,listeningTo:s,count:0}}return f(t,e,i,this,o),this};var p=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),s=i.context,o=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:s,ctx:s||o,listening:a})}return t};c.off=function(t,e,n){return this._events?(this._events=d(v,this._events,t,e,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var s=t?[t._listenId]:n.keys(r),o=0;o<s.length;o++){var a=r[s[o]];if(!a)break;a.obj.off(e,i,this)}return this};var v=function(t,e,i,r){if(t){var s,o=0,a=r.context,u=r.listeners;if(e||i||a){for(var l=e?[e]:n.keys(t);o<l.length;o++){e=l[o];var c=t[e];if(!c)break;for(var h=[],d=0;d<c.length;d++){var f=c[d];i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context?h.push(f):(s=f.listening,s&&0===--s.count&&(delete u[s.id],delete s.listeningTo[s.objId]))}h.length?t[e]=h:delete t[e]}return t}for(var p=n.keys(u);o<p.length;o++)s=u[p[o]],delete u[s.id],delete s.listeningTo[s.objId]}};c.once=function(t,e,i){var r=d(g,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(r,e,i)},c.listenToOnce=function(t,e,i){var r=d(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var g=function(t,e,i,r){if(i){var s=t[e]=n.once(function(){r(e,s),i.apply(this,arguments)});s._callback=i}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return d(m,this._events,t,void 0,n),this};var m=function(t,e,n,i){if(t){var r=t[e],s=t.all;r&&s&&(s=s.slice()),r&&b(r,i),s&&b(s,[e].concat(i))}return t},b=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};c.bind=c.on,c.unbind=c.off,n.extend(e,c);var y=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var s=i.unset,o=i.silent,a=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,h=this._previousAttributes;for(var d in r)e=r[d],n.isEqual(l[d],e)||a.push(d),n.isEqual(h[d],e)?delete c[d]:c[d]=e,s?delete l[d]:l[d]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!o){a.length&&(this._pending=i);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,l[a[f]],i)}if(u)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var s=t[r];n.isEqual(e[r],s)||(i[r]=s)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;return!!e.set(r,t)&&(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t))},U(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var s=i.wait;if(r&&!s){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var o=this,a=i.success,u=this.attributes;i.success=function(t){o.attributes=u;var e=i.parse?o.parse(t,i):t;return s&&(e=n.extend({},r,e)),!(e&&!o.set(e,i))&&(a&&a.call(i.context,o,t,i),void o.trigger("sync",o,t,i))},U(this,i),r&&s&&(this.attributes=n.extend({},u,r));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=r);var c=this.sync(l,this,i);return this.attributes=u,c},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&s(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var o=!1;return this.isNew()?n.defer(t.success):(U(this,t),o=this.sync("delete",this,t)),r||s(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,_,"attributes");var x=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},E=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),s=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<s;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+s+n]=r[i]};n.extend(x.prototype,c,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,k))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){e=n.extend({},w,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var s,o,a=[],u=[],l=[],c=[],h={},d=e.add,f=e.merge,p=e.remove,v=!1,g=this.comparator&&null==r&&e.sort!==!1,m=n.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){s=t[o];var b=this.get(s);if(b){if(f&&s!==b){var y=this._isModel(s)?s.attributes:s;e.parse&&(y=b.parse(y,e)),b.set(y,e),l.push(b),g&&!v&&(v=b.hasChanged(m))}h[b.cid]||(h[b.cid]=!0,a.push(b)),t[o]=b}else d&&(s=t[o]=this._prepareModel(s,e),s&&(u.push(s),this._addReference(s,e),h[s.cid]=!0,a.push(s)))}if(p){for(o=0;o<this.length;o++)s=this.models[o],h[s.cid]||c.push(s);c.length&&this._removeModels(c,e)}var _=!1,x=!g&&d&&p;if(a.length&&x?(_=this.length!==a.length||n.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,E(this.models,a,0),this.length=this.models.length):u.length&&(g&&(v=!0),E(this.models,u,null==r?this.length:r),this.length=this.models.length),v&&this.sort({silent:!0}),!e.silent){for(o=0;o<u.length;o++)null!=r&&(e.index=r+o),s=u[o],s.trigger("add",s,this,e);(v||_)&&this.trigger("sort",this,e),(u.length||c.length||l.length)&&(e.changes={added:u,removed:c,merged:l},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var s=this.indexOf(r);this.models.splice(s,1),this.length--,delete this._byId[r.cid];var o=this.modelId(r.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=s,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}});var A={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(x,A,"models");var O=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];n.extend(O.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(T);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t);
}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var s=S[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var u=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,u&&u.call(r.context,t,e,n)};var l=r.xhr=e.ajax(n.extend(o,r));return i.trigger("request",i,l,r),l};var S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var j=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,P=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(j.prototype,c,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return e.history.route(t,function(n){var o=s._extractParameters(t,n);s.execute(r,o,i)!==!1&&(s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),e.history.trigger("route",s,i,o))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(M,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(P,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var B=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,F=/#.*$/;B.started=!1,n.extend(B.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(R,"")},start:function(t){if(B.started)throw new Error("Backbone.history has already been started");if(B.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(D,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),B.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!B.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(F,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new B;var H=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};y.extend=x.extend=j.extend=O.extend=B.extend=H;var L=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}),t.exports=Backbone}).call(e,n(19))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.getSheetAsJsonUrl=function(t){return t?"https://spreadsheets.google.com/feeds/list/"+t+"/od6/public/values?alt=json":void 0},e.get=function(t,e){return(t["gsx$"+e]||{}).$t}),i=e.getInt=function(t,e){var i=n(t,e);return i?parseInt(i):i};e.getBool=function(t,e,i){var r=n(t,e);return r?"true"===r.toLowerCase():!i&&void 0},e.getCsv=function(t,e){var i=n(t,e);return i?i.split(",").map(function(t){return t.trim()}):[]},e.getMinMax=function(t,e){return{min:i(t,e+"-min"),max:i(t,e+"-max")}}},function(t,e){t.exports={basis:{"tea-black":"Thé noir","tea-green":"Thé vert","tea-oolong":"Thé oolong","tea-white":"Thé blanc","tea-rooibos":"Rooibos (thé rouge)",infusion:"Infusion/tisane",coffee:"Café",cocoa:"Cacao"},theine:{none:"Sans théine",low:"Teneur en théine : faible",medium:"Teneur en théine : moyenne",high:"Teneur en théine : élevée",coffee:"Café",unknown:"Teneur en théine inconnue"},moment:{morning:"Matin",daytime:"Journée",evening:"Soirée",unknown:"Pas de conseil"},orders:{none:"Personne n'a encore choisi.",random:"Laisser le hasard décider",clear:"Vider les commandes"},units:{fahrenheit:"&deg;F",celsius:"&deg;C",minutes:"&nbsp;min"},beverage:{expand:"Plus d'infos",order:"J'en prends un !"},"free-text-filter":"D'autres critères ?",loading:"Merci de patienter, nous vidons notre tasse et cherchons de quoi remplir la vôtre.",error:{configuration:"Le plugin est mal configuré. Regardez la documentation ou ouvrez un ticket si vous avez une question ou souhaitez enregistrer un bug.",empty:"Désolé, nous ne pouvons rien vous proposer qui corresponde à vos critères.",loading:"Désolé, la liste de boissons n'a pas pu être chargée."}}},function(t,e,n){(function(t){var i,r;(function(){var s,o,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},h=[].slice,d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],public:{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,n){return this.call(t,e,n.view.models)},configure:function(t){var e,n,i,r;null==t&&(t={});for(i in t)if(r=t[i],"binders"===i||"components"===i||"formatters"===i||"adapters"===i)for(n in r)e=r[n],s[i][n]=e;else s.public[i]=r},bind:function(t,e,n){var i;return null==e&&(e={}),null==n&&(n={}),i=new s.View(t,e,n),i.bind(),i},init:function(t,e,n){var i,r,o;if(null==n&&(n={}),null==e&&(e=document.createElement("div")),t=s.public.components[t],r=t.template.call(this,e),r instanceof HTMLElement){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}else e.innerHTML=r;return i=t.initialize.call(this,e,n),o=new s.View(e,i),o.bind(),o}}},window.jQuery||window.$?(a=window.jQuery||window.$,l="on"in a.prototype?["on","off"]:["bind","unbind"],o=l[0],u=l[1],s.Util={bindEvent:function(t,e,n){return a(t)[o](e,n)},unbindEvent:function(t,e,n){return a(t)[u](e,n)},getInputValue:function(t){var e;return e=a(t),"checkbox"===e.attr("type")?e.is(":checked"):e.val()}}):s.Util={bindEvent:function(){return"addEventListener"in window?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(t,e,n){return t.removeEventListener(e,n,!1)}:function(t,e,n){return t.detachEvent("on"+e,n)}}(),getInputValue:function(t){var e,n,i,r;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(r=[],n=0,i=t.length;n<i;n++)e=t[n],e.selected&&r.push(e.value);return r}return t.value}},s.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){return/^'.*'$|^".*"$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:""===t?{type:this.types.primitive,value:void 0}:isNaN(Number(t))===!1?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t}},t}(),s.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var n,i,r,s,o,a,u;for(a=[],s=t.length,n=0,i=0;i<s;){if(n=t.indexOf(e[0],i),n<0){a.push({type:this.types.text,value:t.slice(i)});break}if(n>0&&i<n&&a.push({type:this.types.text,value:t.slice(i,n)}),i=n+e[0].length,n=t.indexOf(e[1],i),n<0){o=t.slice(i-e[1].length),r=a[a.length-1],(null!=r?r.type:void 0)===this.types.text?r.value+=o:a.push({type:this.types.text,value:o});break}u=t.slice(i,n).trim(),a.push({type:this.types.binding,value:u}),i=n+e[1].length}return a},t}(),s.View=function(){function t(t,e,n){var i,r,o,a,u,l,h,d,f,p,v,g,m;for(this.els=t,this.models=e,null==n&&(n={}),this.update=c(this.update,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.select=c(this.select,this),this.traverse=c(this.traverse,this),this.build=c(this.build,this),this.buildBinding=c(this.buildBinding,this),this.bindingRegExp=c(this.bindingRegExp,this),this.options=c(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),f=s.extensions,u=0,h=f.length;u<h;u++){if(r=f[u],this[r]={},n[r]){p=n[r];for(i in p)o=p[i],this[r][i]=o}v=s.public[r];for(i in v)o=v[i],null==(a=this[r])[i]&&(a[i]=o)}for(g=s.options,l=0,d=g.length;l<d;l++)r=g[l],this[r]=null!=(m=n[r])?m:s.public[r];this.build()}return t.prototype.options=function(){var t,e,n,i,r;for(e={},r=s.extensions.concat(s.options),n=0,i=r.length;n<i;n++)t=r[n],e[t]=this[t];return e},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,e,n,i){var r,o,a,u,l,c,h;return l={},h=function(){var t,e,n,r;for(n=i.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g),r=[],t=0,e=n.length;t<e;t++)c=n[t],r.push(c.trim());return r}(),r=function(){var t,e,n,i;for(n=h.shift().split("<"),i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push(o.trim());return i}(),u=r.shift(),l.formatters=h,(a=r.shift())&&(l.dependencies=a.split(/\s+/)),this.bindings.push(new s[t](this,e,n,u,l))},t.prototype.build=function(){var t,e,n,i,r;for(this.bindings=[],e=function(t){return function(n){var i,r,o,a,u,l,c,h,d,f,p,v,g;if(3===n.nodeType){if(u=s.TextTemplateParser,(o=t.templateDelimiters)&&(h=u.parse(n.data,o)).length&&(1!==h.length||h[0].type!==u.types.text)){for(d=0,p=h.length;d<p;d++)c=h[d],l=document.createTextNode(c.value),n.parentNode.insertBefore(l,n),1===c.type&&t.buildBinding("TextBinding",l,null,c.value);n.parentNode.removeChild(n)}}else 1===n.nodeType&&(i=t.traverse(n));if(!i)for(g=function(){var t,e,i,r;for(i=n.childNodes,r=[],t=0,e=i.length;t<e;t++)a=i[t],r.push(a);return r}(),f=0,v=g.length;f<v;f++)r=g[f],e(r)}}(this),r=this.els,n=0,i=r.length;n<i;n++)t=r[n],e(t);this.bindings.sort(function(t,e){var n,i;return((null!=(n=e.binder)?n.priority:void 0)||0)-((null!=(i=t.binder)?i.priority:void 0)||0)})},t.prototype.traverse=function(t){var e,n,i,r,o,a,u,l,c,h,d,f,p,v,g,m;for(r=this.bindingRegExp(),o="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,v=t.attributes,h=0,f=v.length;h<f;h++)if(e=v[h],r.test(e.name)){if(l=e.name.replace(r,""),!(i=this.binders[l])){g=this.binders;for(a in g)c=g[a],"*"!==a&&a.indexOf("*")!==-1&&(u=new RegExp("^"+a.replace(/\*/g,".+")+"$"),u.test(l)&&(i=c))}i||(i=this.binders["*"]),i.block&&(o=!0,n=[e])}for(m=n||t.attributes,d=0,p=m.length;d<p;d++)e=m[d],r.test(e.name)&&(l=e.name.replace(r,""),this.buildBinding("Binding",t,l,e.value));return o||(l=t.nodeName.toLowerCase(),this.components[l]&&!t._bound&&(this.bindings.push(new s.ComponentBinding(this,t,l)),o=!0)),o},t.prototype.select=function(t){var e,n,i,r,s;for(r=this.bindings,s=[],n=0,i=r.length;n<i;n++)e=r[n],t(e)&&s.push(e);return s},t.prototype.bind=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],t.bind()},t.prototype.unbind=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],t.unbind()},t.prototype.sync=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],"function"==typeof t.sync&&t.sync()},t.prototype.publish=function(){var t,e,n,i;for(i=this.select(function(t){var e;return null!=(e=t.binder)?e.publishes:void 0}),e=0,n=i.length;e<n;e++)t=i[e],t.publish()},t.prototype.update=function(t){var e,n,i,r,s,o;null==t&&(t={});for(n in t)i=t[n],this.models[n]=i;for(o=this.bindings,r=0,s=o.length;r<s;r++)e=o[r],"function"==typeof e.update&&e.update(t)},t}(),s.Binding=function(){function t(t,e,n,i,r){this.view=t,this.el=e,this.type=n,this.keypath=i,this.options=null!=r?r:{},this.getValue=c(this.getValue,this),this.update=c(this.update,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.set=c(this.set,this),this.eventHandler=c(this.eventHandler,this),this.formattedValue=c(this.formattedValue,this),this.parseFormatterArguments=c(this.parseFormatterArguments,this),this.parseTarget=c(this.parseTarget,this),this.observe=c(this.observe,this),this.setBinder=c(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var t,e,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(t in i)n=i[t],"*"!==t&&t.indexOf("*")!==-1&&(e=new RegExp("^"+t.replace(/\*/g,".+")+"$"),e.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+t.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}if(this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function)return this.binder={routine:this.binder}},t.prototype.observe=function(t,e,n){return s.sightglass(t,e,n,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return t=s.TypeParser.parse(this.keypath),t.type===s.TypeParser.types.primitive?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.parseFormatterArguments=function(t,e){var n,i,r,o,a,u,l;for(t=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],r.push(s.TypeParser.parse(i));return r}(),o=[],n=u=0,l=t.length;u<l;n=++u)i=t[n],o.push(i.type===s.TypeParser.types.primitive?i.value:((a=this.formatterObservers)[e]||(a[e]={}),(r=this.formatterObservers[e][n])?void 0:(r=this.observe(this.view.models,i.value,this.sync),this.formatterObservers[e][n]=r),r.value()));return o},t.prototype.formattedValue=function(t){var e,n,i,r,s,o,a,u,l;for(u=this.formatters,n=o=0,a=u.length;o<a;n=++o)i=u[n],e=i.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),r=e.shift(),i=this.view.formatters[r],s=this.parseFormatterArguments(e,n),(null!=i?i.read:void 0)instanceof Function?t=(l=i.read).call.apply(l,[this.model,t].concat(h.call(s))):i instanceof Function&&(t=i.call.apply(i,[this.model,t].concat(h.call(s))));return t},t.prototype.eventHandler=function(t){var e,n;return n=(e=this).view.handler,function(i){return n.call(t,this,i,e)}},t.prototype.set=function(t){var e;return t=t instanceof Function&&!this.binder.function&&s.public.executeFunctions?this.formattedValue(t.call(this.model)):this.formattedValue(t),null!=(e=this.binder.routine)?e.call(this,this.el,t):void 0},t.prototype.sync=function(){var t,e;return this.set(function(){var n,i,r,s,o,a,u;if(this.observer){if(this.model!==this.observer.target){for(o=this.dependencies,n=0,r=o.length;n<r;n++)e=o[n],e.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(u=this.options.dependencies,i=0,s=u.length;i<s;i++)t=u[i],e=this.observe(this.model,t,this.sync),this.dependencies.push(e)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var t,e,n,i,r,s,o,a,u,l,c,d,f;if(this.observer){for(a=this.getValue(this.el),s=this.formatters.length-1,c=this.formatters.slice(0).reverse(),n=u=0,l=c.length;u<l;n=++u)i=c[n],e=s-n,t=i.split(/\s+/),r=t.shift(),o=this.parseFormatterArguments(t,e),(null!=(d=this.view.formatters[r])?d.publish:void 0)&&(a=(f=this.view.formatters[r]).publish.apply(f,[a].concat(h.call(o))));return this.observer.setValue(a)}},t.prototype.bind=function(){var t,e,n,i,r,s,o;if(this.parseTarget(),null!=(r=this.binder.bind)&&r.call(this,this.el),null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(o=this.options.dependencies,n=0,i=o.length;n<i;n++)t=o[n],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);if(this.view.preloadData)return this.sync()},t.prototype.unbind=function(){var t,e,n,i,r,s,o,a,u,l;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),null!=(a=this.observer)&&a.unobserve(),u=this.dependencies,r=0,s=u.length;r<s;r++)i=u[r],i.unobserve();this.dependencies=[],l=this.formatterObservers;for(n in l){e=l[n];for(t in e)i=e[t],i.unobserve()}return this.formatterObservers={}},t.prototype.update=function(t){var e,n;return null==t&&(t={}),this.model=null!=(e=this.observer)?e.target:void 0,null!=(n=this.binder.update)?n.call(this,t):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):s.Util.getInputValue(t)},t}(),s.ComponentBinding=function(t){function e(t,e,n){var i,r,o,a,u,l,h,d;for(this.view=t,this.el=e,this.type=n,this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.locals=c(this.locals,this),this.component=this.view.components[this.type],this.static={},this.observers={},this.upstreamObservers={},r=t.bindingRegExp(),h=this.el.attributes||[],u=0,l=h.length;u<l;u++)i=h[u],r.test(i.name)||(o=this.camelCase(i.name),a=s.TypeParser.parse(i.value),p.call(null!=(d=this.component.static)?d:[],o)>=0?this.static[o]=i.value:a.type===s.TypeParser.types.primitive?this.static[o]=a.value:this.observers[o]=i.value)}return f(e,t),e.prototype.sync=function(){},e.prototype.update=function(){},e.prototype.publish=function(){},e.prototype.locals=function(){var t,e,n,i,r,s;n={},r=this.static;for(t in r)i=r[t],n[t]=i;s=this.observers;for(t in s)e=s[t],n[t]=e.value();return n},e.prototype.camelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},e.prototype.bind=function(){var t,e,n,i,r,o,a,u,l,c,h,d,f,p,v,g,m,b,y,_;if(!this.bound){p=this.observers;for(e in p)n=p[e],this.observers[e]=this.observe(this.view.models,n,function(t){return function(e){return function(){return t.componentView.models[e]=t.observers[e].value()}}}(this).call(this,e));this.bound=!0}if(null!=this.componentView)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),a=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,o={},v=s.extensions,c=0,d=v.length;c<d;c++){if(r=v[c],o[r]={},this.component[r]){g=this.component[r];for(t in g)u=g[t],o[r][t]=u}m=this.view[r];for(t in m)u=m[t],null==(l=o[r])[t]&&(l[t]=u)}for(b=s.options,h=0,f=b.length;h<f;h++)r=b[h],o[r]=null!=(y=this.component[r])?y:this.view[r];this.componentView=new s.View(Array.prototype.slice.call(this.el.childNodes),a,o),this.componentView.bind(),_=this.observers;for(e in _)i=_[e],this.upstreamObservers[e]=this.observe(this.componentView.models,e,function(t){return function(e,n){return function(){return n.setValue(t.componentView.models[e])}}}(this).call(this,e,i))}},e.prototype.unbind=function(){var t,e,n,i,r;n=this.upstreamObservers;for(t in n)e=n[t],e.unobserve();i=this.observers;for(t in i)e=i[t],e.unobserve();return null!=(r=this.componentView)?r.unbind.call(this):void 0},e}(s.Binding),s.TextBinding=function(t){function e(t,e,n,i,r){this.view=t,this.el=e,this.type=n,this.keypath=i,this.options=null!=r?r:{},this.sync=c(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return f(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(s.Binding),s.public.binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},s.public.binders.html=function(t,e){return t.innerHTML=null!=e?e:""},s.public.binders.show=function(t,e){return t.style.display=e?"":"none"},s.public.binders.hide=function(t,e){return t.style.display=e?"none":""},s.public.binders.enabled=function(t,e){return t.disabled=!e},s.public.binders.disabled=function(t,e){return t.disabled=!!e},s.public.binders.checked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var n;return"radio"===t.type?t.checked=(null!=(n=t.value)?n.toString():void 0)===(null!=e?e.toString():void 0):t.checked=!!e}},s.public.binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var n;return"radio"===t.type?t.checked=(null!=(n=t.value)?n.toString():void 0)!==(null!=e?e.toString():void 0):t.checked=!e}},s.public.binders.value={publishes:!0,priority:3e3,bind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return this.event="SELECT"===t.tagName?"change":"input",s.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return s.Util.unbindEvent(t,this.event,this.publish)},routine:function(t,e){var n,i,r,s,o,u,l;if("INPUT"===t.tagName&&"radio"===t.type)return t.setAttribute("value",e);if(null!=window.jQuery){if(t=a(t),(null!=e?e.toString():void 0)!==(null!=(s=t.val())?s.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(l=[],i=0,r=t.length;i<r;i++)n=t[i],l.push(n.selected=(o=n.value,p.call(e,o)>=0));return l}}else if((null!=e?e.toString():void 0)!==(null!=(u=t.value)?u.toString():void 0))return t.value=null!=e?e:""}},s.public.binders.if={block:!0,priority:4e3,bind:function(t){var e,n;if(null==this.marker)return e=[this.view.prefix,this.type].join("-").replace("--","-"),n=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)},unbind:function(){if(this.nested)return this.nested.unbind(),this.bound=!1},routine:function(t,e){var n,i,r,o;if(!!e==!this.bound){if(e){r={},o=this.view.models;for(n in o)i=o[n],r[n]=i;return(this.nested||(this.nested=new s.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},s.public.binders.unless={block:!0,priority:4e3,bind:function(t){return s.public.binders.if.bind.call(this,t)},unbind:function(){return s.public.binders.if.unbind.call(this)},routine:function(t,e){return s.public.binders.if.routine.call(this,t,!e)},update:function(t){return s.public.binders.if.update.call(this,t)}},s.public.binders["on-*"]={function:!0,priority:1e3,unbind:function(t){if(this.handler)return s.Util.unbindEvent(t,this.args[0],this.handler)},routine:function(t,e){return this.handler&&s.Util.unbindEvent(t,this.args[0],this.handler),s.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(e))}},s.public.binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,n,i,r,s;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(s=this.iterated,i=0,r=s.length;i<r;i++)n=s[i],n.bind()},unbind:function(t){var e,n,i,r;if(null!=this.iterated)for(r=this.iterated,n=0,i=r.length;n<i;n++)e=r[n],e.unbind()},routine:function(t,e){var n,i,r,o,a,u,l,c,h,d,f,p,v,g,m,b,y,_,x,w;if(l=this.args[0],e=e||[],this.iterated.length>e.length)for(_=Array(this.iterated.length-e.length),p=0,m=_.length;p<m;p++)r=_[p],f=this.iterated.pop(),f.unbind(),this.marker.parentNode.removeChild(f.els[0]);for(o=v=0,b=e.length;v<b;o=++v)if(u=e[o],i={index:o},i[s.public.iterationAlias(l)]=o,i[l]=u,null==this.iterated[o]){x=this.view.models;for(a in x)u=x[a],null==i[a]&&(i[a]=u);h=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,c=this.view.options(),c.preloadData=!0,d=t.cloneNode(!0),f=new s.View(d,i,c),f.bind(),this.iterated.push(f),this.marker.parentNode.insertBefore(d,h.nextSibling)}else this.iterated[o].models[l]!==u&&this.iterated[o].update(i);if("OPTION"===t.nodeName)for(w=this.view.bindings,g=0,y=w.length;g<y;g++)n=w[g],n.el===this.marker.parentNode&&"value"===n.type&&n.sync()},update:function(t){var e,n,i,r,s,o,a;e={};for(n in t)i=t[n],n!==this.args[0]&&(e[n]=i);for(a=this.iterated,s=0,o=a.length;s<o;s++)r=a[s],r.update(e)}},s.public.binders["class-*"]=function(t,e){var n;if(n=" "+t.className+" ",!e==(n.indexOf(" "+this.args[0]+" ")!==-1))return t.className=e?""+t.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim()},s.public.binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},s.public.formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?h.call(arguments,1):[],e.call.apply(e,[this].concat(h.call(t)))},s.public.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,n,i;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(n=this.weakmap)[i=t[this.id]]||(n[i]={callbacks:{}})},cleanupWeakReference:function(t,e){if(!(Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length))return delete this.weakmap[e]},stubFunction:function(t,e){var n,i,r;return i=t[e],n=this.weakReference(t),r=this.weakmap,t[e]=function(){var e,s,o,a,u,l,c,h,d,f;a=i.apply(t,arguments),c=n.pointers;for(o in c)for(s=c[o],f=null!=(h=null!=(d=r[o])?d.callbacks[s]:void 0)?h:[],u=0,l=f.length;u<l;u++)(e=f[u])();return a}},observeMutations:function(t,e,n){var i,r,s,o,a,u;if(Array.isArray(t)){if(s=this.weakReference(t),null==s.pointers)for(s.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],a=0,u=r.length;a<u;a++)i=r[a],this.stubFunction(t,i);if(null==(o=s.pointers)[e]&&(o[e]=[]),p.call(s.pointers[e],n)<0)return s.pointers[e].push(n)}},unobserveMutations:function(t,e,n){var i,r,s;if(Array.isArray(t)&&null!=t[this.id]&&(r=this.weakmap[t[this.id]])&&(s=r.pointers[e]))return(i=s.indexOf(n))>=0&&s.splice(i,1),s.length||delete r.pointers[e],this.cleanupWeakReference(r,t[this.id])},observe:function(t,e,n){var i,r,s;return i=this.weakReference(t).callbacks,null==i[e]&&(i[e]=[],r=Object.getOwnPropertyDescriptor(t,e),(null!=r?r.get:void 0)||(null!=r?r.set:void 0)||(s=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return s},set:function(n){return function(r){var o,a,u,l,c;if(r!==s&&(n.unobserveMutations(s,t[n.id],e),s=r,a=n.weakmap[t[n.id]])){if(i=a.callbacks,i[e])for(c=i[e].slice(),u=0,l=c.length;u<l;u++)o=c[u],p.call(i[e],o)>=0&&o();return n.observeMutations(r,t[n.id],e)}}}(this)}))),p.call(i[e],n)<0&&i[e].push(n),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,n){var i,r,s;if((s=this.weakmap[t[this.id]])&&(i=s.callbacks[e]))return(r=i.indexOf(n))>=0&&(i.splice(r,1),i.length||(delete s.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(s,t[this.id])},get:function(t,e){return t[e]},set:function(t,e,n){return t[e]=n}},s.factory=function(t){return s.sightglass=t,s.public._=s,s.public},"object"==typeof("undefined"!=typeof t&&null!==t?t.exports:void 0)?t.exports=s.factory(n(6)):(i=[n(6)],r=function(t){return this.rivets=s.factory(t)}.apply(e,i),!(void 0!==r&&(t.exports=r)))}).call(this)}).call(e,n(20)(t))},function(t,e,n){var i,r;(function(){function n(t,e,n,i){return new s(t,e,n,i)}function s(t,e,n,i){this.options=i||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=n,this.objectPath=[],this.update=this.update.bind(this),this.parse(),o(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function o(t){return"object"==typeof t&&null!==t}function a(t){throw new Error("[sightglass] "+t)}n.adapters={},s.tokenize=function(t,e,n){var i,r,s=[],o={i:n,path:""};for(i=0;i<t.length;i++)r=t.charAt(i),~e.indexOf(r)?(s.push(o),o={i:r,path:""}):o.path+=r;return s.push(o),
s},s.prototype.parse=function(){var t,e,i=this.interfaces();i.length||a("Must define at least one adapter interface."),~i.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):("undefined"==typeof(t=this.options.root||n.root)&&a("Must define a default root adapter."),e=this.keypath),this.tokens=s.tokenize(e,i,t),this.key=this.tokens.pop()},s.prototype.realize=function(){var t,e=this.obj,n=!1;return this.tokens.forEach(function(i,r){o(e)?("undefined"!=typeof this.objectPath[r]?e!==(t=this.objectPath[r])&&(this.set(!1,i,t,this.update),this.set(!0,i,e,this.update),this.objectPath[r]=e):(this.set(!0,i,e,this.update),this.objectPath[r]=e),e=this.get(i,e)):(n===!1&&(n=r),(t=this.objectPath[r])&&this.set(!1,i,t,this.update))},this),n!==!1&&this.objectPath.splice(n),e},s.prototype.update=function(){var t,e;(t=this.realize())!==this.target&&(o(this.target)&&this.set(!1,this.key,this.target,this.callback),o(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,(this.value()instanceof Function||this.value()!==e)&&this.callback())},s.prototype.value=function(){if(o(this.target))return this.get(this.key,this.target)},s.prototype.setValue=function(t){o(this.target)&&this.adapter(this.key).set(this.target,this.key.path,t)},s.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},s.prototype.set=function(t,e,n,i){var r=t?"observe":"unobserve";this.adapter(e)[r](n,e.path,i)},s.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(n.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},s.prototype.adapter=function(t){return this.options.adapters[t.i]||n.adapters[t.i]},s.prototype.unobserve=function(){var t;this.tokens.forEach(function(e,n){(t=this.objectPath[n])&&this.set(!1,e,t,this.update)},this),o(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof t&&t.exports?t.exports=n:(i=[],r=function(){return this.sightglass=n}.apply(e,i),!(void 0!==r&&(t.exports=r)))}).call(this)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=n(13),u=i(a),l=n(0),c=i(l),h=n(9),d=i(h),f=n(10),p=i(f),v=n(11),g=i(v),m=n(4),b=i(m),y=n(18);n(17),n(16);var _="orders-summary",x="fahrenheit",w="celsius";u.default.formatters.minMax=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";if(t){if(t.min)return t.max&&t.min!==t.max?t.min+e+t.max:t.min;if(t.max)return t.max}return""},u.default.formatters.showMinMax=function(t){return Boolean(t&&(t.min||t.max))},e.default=o.View.extend({beverages:null,orders:null,filters:null,context:null,rview:null,events:{"change .filters :checkbox":"_filterBeverages","keyup .filters :text":"_filterBeverages","click .beverage .click-expand":"_toggleDetail","click .beverage .click-order":"_pick","click .click-random-order":"_pickRandom","click .click-clear-order":"_clearOrder"},initialize:function(t){this.context={i18n:b.default,ready:!1,error:!1,temperatureUnit:t&&t.celsius?w:x};var e=void 0;t&&(e=t.gSheetId,this.filters=new p.default(t.filters)),e?this._initAndFetchBeverages(e):this.context.error=this.context.i18n.error.configuration},render:function(){return this.rview&&this.rview.unbind(),this.context.beverages=this.beverages,this.context.orders=this.orders,this.context.filters=this.filters,this.rview=u.default.bind(this.$el.html(y),this.context),this},_initAndFetchBeverages:function(t){var e=this;this.orders=new g.default,this.beverages=new d.default(null,{gSheetId:t}),sessionStorage&&(this.orders.on("update change",function(){sessionStorage.setItem(_,JSON.stringify(e.orders.get("orders")))},this),this.beverages.once("sync",function(){s.default.each(JSON.parse(sessionStorage.getItem(_)),function(t){e.orders.order(e.beverages.get(t.id),t.quantity)})},this)),this.beverages.on("request",function(){e.context.ready=!1},this).on("sync",function(){e._filterBeverages(),e.context.ready=!0},this).fetch({error:function(){e.context.error=e.context.i18n.error.loading}})},_filterBeverages:function(){var t=this;this.beverages._shown=this.beverages.reduce(function(e,n){return n._show=t.filters.match(n),n._show?e+1:e},0)},_toggleDetail:function(t){var e=this._getClickedBeverage(t);e._detailed=!e._detailed},_pick:function(t){this.orders.order(this._getClickedBeverage(t))},_getClickedBeverage:function(t){return this.beverages.get((0,c.default)(t.currentTarget).closest(".beverage").data("id"))},_pickRandom:function(){var t=this.beverages.filter(function(t){return t._show});this.orders.order(t[s.default.random(0,t.length-1)])},_clearOrder:function(){this.orders.clear()},remove:function(){return this.rview&&this.rview.unbind(),o.View.prototype.remove.bind(this)()}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(3);e.default=i.Model.extend({parse:function(t){return{id:t.id.$t,name:(0,r.get)(t,"name"),brand:(0,r.get)(t,"brand"),basis:(0,r.get)(t,"basis"),stock:(0,r.getBool)(t,"stock",!0),packaged:(0,r.getBool)(t,"packaged",!0),theine:(0,r.get)(t,"theine"),time:{morning:(0,r.getBool)(t,"morning",!1),daytime:(0,r.getBool)(t,"daytime",!1),evening:(0,r.getBool)(t,"evening",!1)},preparation:{temp:(0,r.getMinMax)(t,"t"),time:(0,r.getMinMax)(t,"time")},ingredients:(0,r.getCsv)(t,"ingredients"),benefits:(0,r.getCsv)(t,"benefits"),note:(0,r.get)(t,"note")}}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BEVERAGE_ORDER=void 0;var r=n(2),s=n(8),o=i(s),a=n(3),u=e.BEVERAGE_ORDER={"tea-black":0,"tea-green":1,"tea-oolong":1,"tea-white":2,"tea-rooibos":3,infusion:4,coffee:5,cocoa:6};e.default=r.Collection.extend({model:o.default,initialize:function(t,e){e&&(this.gSheetId=e.gSheetId)},url:function(){return(0,a.getSheetAsJsonUrl)(this.gSheetId)},parse:function(t){return t.feed.entry},comparator:function(t){return u[t.get("basis")]}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=n(4),u=i(a),l="teas",c="autoTime",h=5,d=11,f=10,p=20,v=18,g=2,m=Object.freeze({morning:[h,d],daytime:[f,p],evening:[v,g]}),b=function(t){if(!s.default.has(m,t))return!1;var e=m[t][0],n=m[t][1],i=(new Date).getHours();return e<=n?e<=i&&i<n:e<=i||i<n},y=function(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var o=function(e){return t.test(e)},a=0;a<i.length;a++){var u=e.get(i[a]);if(s.default.isString(u)&&o(u)||s.default.isArray(u)&&s.default.find(u,o))return!0}return!1},_=o.Model.extend({idAttribute:"key"}),x=o.Collection.extend({model:_});e.default=o.Model.extend({defaults:{text:""},splitText:[],initialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._initBasesFilters(e.bases),this._initMomentsFilters(e.moments,e[c]),this.on("change:text",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.splitText=n.trim().split(/\s+/)},this)},_initBasesFilters:function(t){var e=s.default.contains(t,l);this.set("bases",new x(s.default.chain(u.default.basis).keys().map(function(n){return{key:n,active:Boolean(!t||e&&/^tea-/.test(n)||s.default.contains(t,n))}}).value()))},_initMomentsFilters:function(t,e){var n=t||e?function(n){return Boolean(s.default.contains(t,n)||e&&b(n))}:function(){return!0};this.set("moments",new x(s.default.chain(u.default.moment).keys().map(function(t){return{key:t,active:n(t)}}).value()))},match:function(t){return this._isBasisActive(t)&&this._isMomentActive(t)&&this._containsText(t)},_isBasisActive:function(t){var e=this.get("bases").get(t.get("basis"));return!e||e.get("active")},_isMomentActive:function(t){var e=t.get("time"),n=this.get("moments");return s.default.isObject(e)?Boolean(s.default.chain(e).keys().find(function(t){var i=e[t];if(s.default.isUndefined(i)||s.default.isNull(i))return n.get("unknown").get("active");if(i){var r=n.get(t);return r&&r.get("active")}return!1}).value()):n.get("unknown").get("active")},_containsText:function(t){return!this.get("text")||!s.default.find(this.splitText,function(e){return!y(new RegExp(e,"i"),t,"name","brand","note","benefits","ingredients")})}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=n(12),o=i(s);e.default=r.Model.extend({initialize:function(){var t=this,e=new r.Collection(null,{model:o.default});this.set({total:0,orders:e}),e.on("update change",function(){return t.set("total",e.reduce(function(t,e){return t+e.get("quantity")},0))},this)},order:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=this.get("orders").get(e.get("id"));t?t.set("quantity",t.get("quantity")+n):this.get("orders").add(new o.default({beverage:e,quantity:n}))},clear:function(){this.get("orders").reset(),this.set("total",0),this.trigger("update")}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.default=i.Model.extend({defaults:{quantity:1},initialize:function(t){this.set("id",t.beverage.get("id"))}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),s=i(r),o=n(1),a=i(o),u=n(0),l=i(u);n(14),s.default.formatters.defined=function(t){return!a.default.isUndefined(t)&&!a.default.isNull(t)};var c=function(t){return s.default.formatters.defined(t)?t:""};s.default.formatters.eq=function(t,e){return t===e},s.default.formatters.join=function(t,e){return Array.isArray(t)?t.join(e):c(t)},s.default.formatters.contains=function(t,e){return!!Array.isArray(t)&&a.default.indexOf(t,e)>-1},s.default.formatters.length=function(t){return Array.isArray(t)?t.length:0},s.default.formatters.isEmpty=function(t){return 0===s.default.formatters.length(t)},s.default.formatters.append=function(t,e){return String(c(t))+String(c(e))},s.default.formatters.startWithCap=function(t){return a.default.isString(t)&&t.length>0?t.charAt(0).toUpperCase()+t.substr(1):c(t)},s.default.formatters.toBoolean=function(t){return Boolean(t)},s.default.formatters.not=function(t){return!t},s.default.formatters.and=function(t,e){return t&&e},s.default.formatters.or=function(t,e){return t||e},s.default.formatters.if=function(t,e,n){return t?e:n},s.default.formatters.map=function(t,e){return t&&e?e[t]||t:c(t)},s.default.binders.addclass=function(t,e){t.addedClass&&((0,l.default)(t).removeClass(t.addedClass),delete t.addedClass),e&&((0,l.default)(t).addClass(e),t.addedClass=e)},e.default=s.default},function(t,e,n){n(1),n(0);!function(t,e){"use strict";e(n(5),n(2))}(this,function(t,e){"use strict";function n(t,e,n){if(t instanceof r||t instanceof s)return 3===arguments.length?"*"===e?void t.set(n):void t.set(e,n):(n="*"===e?t.attributes:t.get(e),n instanceof s?n.models:n)}function i(t){return function(e,n,i){if(e instanceof r){var o=e.get(n),a="change"+("*"===n?"":":"+n);e[t](a,i),o instanceof s&&o[t]("add remove reset sort",i)}}}var r=e.Model,s=e.Collection;return t.adapters[":"]={observe:i("on"),unobserve:i("off"),get:n,set:n},t}),t.exports=Backbone},function(t,e,n){var i=n(0),r=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function r(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in l)if(void 0!==t.style[e])return{end:l[e]};return!1}function s(e){var n=this,i=!1;return t(this).one(c.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||c.triggerTransitionEnd(n)},e),this}function o(){a=r(),t.fn.emulateTransitionEnd=s,c.supportsTransitionEnd()&&(t.event.special[c.TRANSITION_END]=i())}var a=!1,u=1e6,l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do t+=~~(Math.random()*u);while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){new Function("bs","return bs")(t.offsetHeight)},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,r){for(var s in r)if(r.hasOwnProperty(s)){var o=r[s],a=i[s],u=void 0;if(u=a&&n(a)?"element":e(a),!new RegExp(o).test(u))throw new Error(t.toUpperCase()+": "+('Option "'+s+'" provided type "'+u+'" ')+('but expected type "'+o+'".'))}}};return o(),c}(i);t.exports=r},function(t,e){},function(t,e,n){(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();(function(n){var i="dropdown",s="4.0.0-alpha.5",o="bs.dropdown",a="."+o,u=".data-api",l=n.fn[i],c=27,h=38,d=40,f=3,p={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+u,KEYDOWN_DATA_API:"keydown"+a+u},v={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},g={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},m=function(){function i(t){e(this,i),this._element=t,this._addEventListeners()}return i.prototype.toggle=function(){if(this.disabled||n(this).hasClass(v.DISABLED))return!1;var t=i._getParentFromElement(this),e=n(t).hasClass(v.OPEN);if(i._clearMenus(),e)return!1;if("ontouchstart"in document.documentElement&&!n(t).closest(g.NAVBAR_NAV).length){var r=document.createElement("div");r.className=v.BACKDROP,n(r).insertBefore(this),n(r).on("click",i._clearMenus)}var s={relatedTarget:this},o=n.Event(p.SHOW,s);return n(t).trigger(o),!o.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),n(t).toggleClass(v.OPEN),n(t).trigger(n.Event(p.SHOWN,s)),!1)},i.prototype.dispose=function(){n.removeData(this._element,o),n(this._element).off(a),this._element=null},i.prototype._addEventListeners=function(){n(this._element).on(p.CLICK,this.toggle)},i._jQueryInterface=function(t){return this.each(function(){var e=n(this).data(o);if(e||n(this).data(o,e=new i(this)),"string"==typeof t){if(void 0===e[t])throw new Error('No method named "'+t+'"');e[t].call(this)}})},i._clearMenus=function(t){if(!t||t.which!==f){var e=n(g.BACKDROP)[0];e&&e.parentNode.removeChild(e);for(var r=n.makeArray(n(g.DATA_TOGGLE)),s=0;s<r.length;s++){var o=i._getParentFromElement(r[s]),a={relatedTarget:r[s]};if(n(o).hasClass(v.OPEN)&&!(t&&"click"===t.type&&/input|textarea/i.test(t.target.tagName)&&n.contains(o,t.target))){var u=n.Event(p.HIDE,a);n(o).trigger(u),u.isDefaultPrevented()||(r[s].setAttribute("aria-expanded","false"),n(o).removeClass(v.OPEN).trigger(n.Event(p.HIDDEN,a)))}}}},i._getParentFromElement=function(e){var i=void 0,r=t.getSelectorFromElement(e);return r&&(i=n(r)[0]),i||e.parentNode},i._dataApiKeydownHandler=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!n(this).hasClass(v.DISABLED))){var e=i._getParentFromElement(this),r=n(e).hasClass(v.OPEN);if(!r&&t.which!==c||r&&t.which===c){if(t.which===c){var s=n(e).find(g.DATA_TOGGLE)[0];n(s).trigger("focus")}return void n(this).trigger("click")}var o=n.makeArray(n(g.VISIBLE_ITEMS));if(o=o.filter(function(t){return t.offsetWidth||t.offsetHeight}),o.length){var a=o.indexOf(t.target);t.which===h&&a>0&&a--,t.which===d&&a<o.length-1&&a++,a<0&&(a=0),o[a].focus()}}},r(i,null,[{key:"VERSION",get:function(){return s}}]),i}();return n(document).on(p.KEYDOWN_DATA_API,g.DATA_TOGGLE,m._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,g.ROLE_MENU,m._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,g.ROLE_LISTBOX,m._dataApiKeydownHandler).on(p.CLICK_DATA_API,m._clearMenus).on(p.CLICK_DATA_API,g.DATA_TOGGLE,m.prototype.toggle).on(p.CLICK_DATA_API,g.FORM_CHILD,function(t){t.stopPropagation()}),n.fn[i]=m._jQueryInterface,n.fn[i].Constructor=m,n.fn[i].noConflict=function(){return n.fn[i]=l,m._jQueryInterface},m})(i)}).call(e,n(15))},function(t,e){t.exports='<div class=beverages-container><div rv-class-up="error | toBoolean | not" class="bubble error slide" role=alert><i class="icon icon-error"></i> {error}</div><div rv-class-up="ready | or error" class="bubble info slide"><i class="icon icon-loading spin"></i> {i18n.loading}</div><div rv-class-up="ready | not | or error" class=slide><div class=header><div class=cart-controls><small>{beverages._shown}/{beverages.models | length}</small> <button class=click-random-order rv-data-tooltip=i18n.orders.random rv-disabled="beverages._shown | eq 0"><i class="icon icon-random"></i></button><div class=dropdown><button class=dropdown-toggle data-toggle=dropdown aria-haspopup=true aria-expanded=false><i class="icon icon-cart"></i> <span class="tag tag-pill tag-primary">{orders:total}</span></button><div class="dropdown-menu dropdown-menu-right cart"><h6 rv-if="orders:total | eq 0" class=dropdown-header>{i18n.orders.none}</h6><a rv-each-o=orders:orders class="dropdown-item clearfix"><span class="tag tag-pill" rv-addclass=o:beverage:basis>{o:quantity}</span> {o:beverage:name} <small rv-if=o:beverage:brand>({o:beverage:brand})</small><br><span class=min-max rv-class-invisible="o:beverage:preparation.time | showMinMax | not"><i class="icon icon-time"></i> <span rv-html="o:beverage:preparation.time | minMax \' - \'"></span><span rv-html=i18n.units.minutes></span></span> <span class=min-max rv-class-invisible="o:beverage:preparation.temp | showMinMax | not"><i class="icon icon-temp"></i> <span rv-text="o:beverage:preparation.temp | minMax \' - \'"></span><span rv-html="temperatureUnit | map i18n.units"></span></span></a><div rv-unless="orders:total | eq 0" class=dropdown-divider></div><a rv-unless="orders:total | eq 0" class="dropdown-item click-clear-order" href=#><strong>&times;</strong> {i18n.orders.clear}</a></div></div></div><div class=filters><div class=btn-group><div rv-each-basis=filters:bases class=toggle rv-data-tooltip="basis:key | map i18n.basis"><input type=checkbox rv-id="\'filter-basis-\' | append basis:key" rv-checked=basis:active> <label rv-for="\'filter-basis-\' | append basis:key"><i class=bev-icon rv-addclass=basis:key></i></label></div></div><div class=btn-group><div rv-each-moment=filters:moments class=toggle rv-data-tooltip="moment:key | map i18n.moment"><input type=checkbox rv-id="\'filter-moment-\' | append basis:key" rv-checked=moment:active> <label rv-for="\'filter-moment-\' | append moment:key"><i class=moment-icon rv-addclass=moment:key></i></label></div></div><input type=text id=field-text-search rv-placeholder=i18n.free-text-filter rv-value=filters:text></div></div><div class="slide bubble info" role=alert rv-class-up="beverages._shown | eq 0 | not"><i class="icon icon-info"></i> {i18n.error.empty}</div><div class="beverage slide" rv-class-up="b._show | not" rv-addclass=b:basis rv-class-detailed=b._detailed rv-each-b=beverages.models rv-data-id=b:id><div class=row><div class="col-xs-12 col-md-10"><div class=row><div class=headers><div class=bev-icon-container rv-class-packaged=b:packaged rv-addclass=b:basis><i class=bev-icon rv-addclass=b:basis></i></div><div class=name>{b:name}</div><div class=brand>{b:brand}</div></div><div class=more><i class="icon icon-note note-tip" rv-if=b:note></i> {b:benefits | join \', \' | startWithCap}</div><div class=strength><div class=moment><ul><li rv-class-invisible="b:time.morning | defined | not | or b:time.morning | not" rv-class-text-muted="b:time.morning | not" rv-data-tooltip="b:time.morning | defined | if i18n.moment.morning i18n.moment.unknown"><i class="moment-icon morning"></i></li><li rv-class-invisible="b:time.daytime | defined | not | or b:time.daytime | not" rv-class-text-muted="b:time.daytime | not" rv-data-tooltip="b:time.daytime | defined | if i18n.moment.daytime i18n.moment.unknown"><i class="moment-icon daytime"></i></li><li rv-class-invisible="b:time.evening | defined | not | or b:time.evening | not" rv-class-text-muted="b:time.evening | not" rv-data-tooltip="b:time.evening | defined | if i18n.moment.evening i18n.moment.unknown"><i class="moment-icon evening"></i></li></ul></div><div class=theine-level rv-data-tooltip="b:theine | map i18n.theine"><div class=icon-bars rv-addclass=b:theine><div class="bar bar-1"></div><div class="bar bar-2"></div><div class="bar bar-3"></div><div class="bar bar-4"></div></div></div></div><div class=preparation><div class=prep-info rv-class-invisible="b:preparation.temp | showMinMax | not"><i class="icon icon-temp"></i> <span rv-text="b:preparation.temp | minMax \' - \'"></span><span rv-html="temperatureUnit | map i18n.units"></span></div><div class=prep-info rv-class-invisible="b:preparation.time | showMinMax | not"><i class="icon icon-time"></i> <span rv-html="b:preparation.time | minMax \' - \'"></span><span rv-html=i18n.units.minutes></span></div></div></div><div class=row><div class=col-xs-12><p class=ingredients>{b:ingredients | join \', \' | startWithCap}</p><p class=note rv-if=b:note><i class="icon icon-note"></i> {b:note}</p></div></div></div><div class="col-xs-12 col-md-2 actions"><div class=btn-group role=group><button class=click-expand rv-data-tooltip=i18n.beverage.expand><i class="icon icon-detail"></i></button> <button class=click-order rv-data-tooltip=i18n.beverage.order><i class="icon icon-pick"></i></button></div></div></div></div></div></div>'},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,configurable:!1,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,configurable:!1,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),s=i(r),o=n(1),a=i(o),u=n(7),l=i(u);s.default.fn.beverages=function(t){var e=void 0;return e=a.default.isString(t)?{gSheetId:t}:a.default.isObject(t)?t:{},new l.default(a.default.extend(e,{el:this})).render(),this},e.default=s.default}]);